<div class="register-container">
  <div class="register-card">
    <h2 class="register-title">ÄÄƒng KÃ½ TÃ i Khoáº£n</h2>
    <p class="register-subtitle">Vui lÃ²ng Ä‘iá»n Ä‘áº§y Ä‘á»§ thÃ´ng tin bÃªn dÆ°á»›i</p>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
      
      <!-- Username -->
      <div class="form-group">
        <label for="username">Username <span class="required">*</span></label>
        <input
          type="text"
          id="username"
          formControlName="username"
          class="form-control"
          [class.is-invalid]="isFieldInvalid('username')"
          placeholder="Nháº­p username (VD: john_doe123)"
        />
        <div class="invalid-feedback" *ngIf="isFieldInvalid('username')">
          {{ getErrorMessage('username') }}
        </div>
        <small class="form-text">3-20 kÃ½ tá»±, báº¯t Ä‘áº§u báº±ng chá»¯ cÃ¡i, chá»‰ chá»©a chá»¯, sá»‘, _, -</small>
      </div>

      <!-- Email -->
      <div class="form-group">
        <label for="email">Email <span class="required">*</span></label>
        <input
          type="email"
          id="email"
          formControlName="email"
          class="form-control"
          [class.is-invalid]="isFieldInvalid('email')"
          placeholder="Nháº­p email (VD: user@example.com)"
        />
        <div class="invalid-feedback" *ngIf="isFieldInvalid('email')">
          {{ getErrorMessage('email') }}
        </div>
      </div>

      <!-- Phone -->
      <div class="form-group">
        <label for="phone">Sá»‘ Ä‘iá»‡n thoáº¡i <span class="required">*</span></label>
        <input
          type="tel"
          id="phone"
          formControlName="phone"
          class="form-control"
          [class.is-invalid]="isFieldInvalid('phone')"
          placeholder="Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i (VD: 0901234567)"
        />
        <div class="invalid-feedback" *ngIf="isFieldInvalid('phone')">
          {{ getErrorMessage('phone') }}
        </div>
        <small class="form-text">Sá»‘ Ä‘iá»‡n thoáº¡i Viá»‡t Nam há»£p lá»‡</small>
      </div>

      <!-- Date of Birth -->
      <div class="form-group">
        <label for="dateOfBirth">NgÃ y sinh <span class="required">*</span></label>
        <input
          type="date"
          id="dateOfBirth"
          formControlName="dateOfBirth"
          class="form-control"
          [class.is-invalid]="isFieldInvalid('dateOfBirth')"
        />
        <div class="invalid-feedback" *ngIf="isFieldInvalid('dateOfBirth')">
          {{ getErrorMessage('dateOfBirth') }}
        </div>
        <small class="form-text">Báº¡n pháº£i tá»« 18 tuá»•i trá»Ÿ lÃªn</small>
      </div>

      <!-- Password -->
      <div class="form-group">
        <label for="password">Máº­t kháº©u <span class="required">*</span></label>
        <div class="password-wrapper">
          <input
            [type]="showPassword ? 'text' : 'password'"
            id="password"
            formControlName="password"
            class="form-control"
            [class.is-invalid]="isFieldInvalid('password')"
            placeholder="Nháº­p máº­t kháº©u"
          />
          <button 
            type="button" 
            class="toggle-password"
            (click)="togglePasswordVisibility('password')"
          >
            {{ showPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
          </button>
        </div>
        <div class="invalid-feedback" *ngIf="isFieldInvalid('password')">
          {{ getErrorMessage('password') }}
        </div>
        <small class="form-text">Ãt nháº¥t 8 kÃ½ tá»±, bao gá»“m chá»¯ hoa, chá»¯ thÆ°á»ng, sá»‘ vÃ  kÃ½ tá»± Ä‘áº·c biá»‡t</small>
      </div>

      <!-- Confirm Password -->
      <div class="form-group">
        <label for="confirmPassword">XÃ¡c nháº­n máº­t kháº©u <span class="required">*</span></label>
        <div class="password-wrapper">
          <input
            [type]="showConfirmPassword ? 'text' : 'password'"
            id="confirmPassword"
            formControlName="confirmPassword"
            class="form-control"
            [class.is-invalid]="isFieldInvalid('confirmPassword')"
            placeholder="Nháº­p láº¡i máº­t kháº©u"
          />
          <button 
            type="button" 
            class="toggle-password"
            (click)="togglePasswordVisibility('confirmPassword')"
          >
            {{ showConfirmPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
          </button>
        </div>
        <div class="invalid-feedback" *ngIf="isFieldInvalid('confirmPassword')">
          {{ getErrorMessage('confirmPassword') }}
        </div>
      </div>

      <!-- Agree Terms Checkbox -->
      <div class="form-group checkbox-group">
        <label class="checkbox-label">
          <input
            type="checkbox"
            formControlName="agreeTerms"
            [class.is-invalid]="isFieldInvalid('agreeTerms')"
          />
          <span>
            TÃ´i Ä‘á»“ng Ã½ vá»›i 
            <a href="#" class="link">Äiá»u khoáº£n sá»­ dá»¥ng</a> 
            vÃ  
            <a href="#" class="link">ChÃ­nh sÃ¡ch báº£o máº­t</a>
            <span class="required">*</span>
          </span>
        </label>
        <div class="invalid-feedback" *ngIf="isFieldInvalid('agreeTerms')">
          {{ getErrorMessage('agreeTerms') }}
        </div>
      </div>

      <!-- Form Status -->
      <div class="form-status" *ngIf="submitted && registerForm.invalid">
        <div class="alert alert-danger">
          âš ï¸ Vui lÃ²ng kiá»ƒm tra láº¡i thÃ´ng tin. CÃ³ {{ invalidFieldsCount }} trÆ°á»ng khÃ´ng há»£p lá»‡.
        </div>
      </div>

      <!-- Buttons -->
      <div class="form-actions">
        <button type="submit" class="btn btn-primary">
          ÄÄƒng kÃ½
        </button>
        <button type="button" class="btn btn-secondary" (click)="resetForm()">
          LÃ m má»›i
        </button>
      </div>

      <!-- Form Debug Info (for development) -->
      <div class="debug-info" *ngIf="registerForm.invalid && submitted">
        <details>
          <summary>ğŸ” Debug Info (Form State)</summary>
          <pre>{{ registerForm.value | json }}</pre>
          <p><strong>Form Valid:</strong> {{ registerForm.valid }}</p>
          <p><strong>Form Errors:</strong> {{ registerForm.errors | json }}</p>
        </details>
      </div>

    </form>
  </div>
</div>
