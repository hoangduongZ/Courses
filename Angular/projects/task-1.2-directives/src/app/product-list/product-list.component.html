<!-- Task 1.2: Directives - Product List with Filter -->
<div class="product-list-container">
  
  <!-- Header Section -->
  <div class="header">
    <h1>ğŸ›ï¸ Product List - Directives Demo</h1>
    <p class="subtitle">Há»c vá» *ngIf, *ngFor, [ngClass], [ngStyle], vÃ  [(ngModel)]</p>
  </div>

  <!-- Filter Controls Section -->
  <div class="filter-section">
    <h2>ğŸ” Filters & Controls</h2>
    
    <!-- Search Input - Two-way binding vá»›i [(ngModel)] -->
    <div class="filter-group">
      <label for="search">ğŸ” TÃ¬m kiáº¿m sáº£n pháº©m:</label>
      <input 
        type="text" 
        id="search"
        [(ngModel)]="searchTerm"
        placeholder="Nháº­p tÃªn sáº£n pháº©m..."
        class="input-control"
      >
      <!-- *ngIf: Hiá»ƒn thá»‹ text khi cÃ³ search term -->
      <small *ngIf="searchTerm" class="hint">
        Äang tÃ¬m: "{{ searchTerm }}"
      </small>
    </div>

    <!-- Category Select - Two-way binding -->
    <div class="filter-group">
      <label for="category">ğŸ“‚ Danh má»¥c:</label>
      <select 
        id="category"
        [(ngModel)]="selectedCategory"
        class="input-control"
      >
        <!-- *ngFor: Loop qua categories -->
        <option *ngFor="let cat of categories" [value]="cat">
          {{ cat === 'all' ? 'Táº¥t cáº£' : cat }}
        </option>
      </select>
    </div>

    <!-- Stock Checkbox - Two-way binding -->
    <div class="filter-group checkbox-group">
      <label>
        <input 
          type="checkbox"
          [(ngModel)]="showOutOfStock"
        >
        Hiá»ƒn thá»‹ sáº£n pháº©m háº¿t hÃ ng
      </label>
    </div>

    <!-- Price Range - Two-way binding -->
    <div class="filter-group">
      <label>ğŸ’° Khoáº£ng giÃ¡:</label>
      <div class="price-range">
        <input 
          type="number" 
          [(ngModel)]="minPrice"
          placeholder="Tá»«"
          class="input-small"
        >
        <span>-</span>
        <input 
          type="number" 
          [(ngModel)]="maxPrice"
          placeholder="Äáº¿n"
          class="input-small"
        >
      </div>
    </div>

    <!-- Sort Select -->
    <div class="filter-group">
      <label for="sort">ğŸ“Š Sáº¯p xáº¿p:</label>
      <select 
        id="sort"
        [(ngModel)]="sortBy"
        class="input-control"
      >
        <option value="name">Theo tÃªn</option>
        <option value="price">Theo giÃ¡</option>
        <option value="discount">Theo giáº£m giÃ¡</option>
      </select>
    </div>

    <!-- View Mode Toggle -->
    <div class="filter-group">
      <button (click)="toggleViewMode()" class="btn-toggle">
        {{ viewMode === 'grid' ? 'ğŸ“‹ Xem dáº¡ng List' : 'ğŸ”² Xem dáº¡ng Grid' }}
      </button>
      <button (click)="resetFilters()" class="btn-reset">
        ğŸ”„ Reset Filters
      </button>
    </div>
  </div>

  <!-- Results Info -->
  <div class="results-info">
    <!-- *ngIf vá»›i else template -->
    <p *ngIf="filteredProducts.length > 0; else noResults">
      Hiá»ƒn thá»‹ <strong>{{ filteredProducts.length }}</strong> sáº£n pháº©m
      (trong tá»•ng sá»‘ <strong>{{ products.length }}</strong>)
    </p>
    <ng-template #noResults>
      <p class="no-results">âŒ KhÃ´ng tÃ¬m tháº¥y sáº£n pháº©m nÃ o</p>
    </ng-template>
  </div>

  <!-- Product Grid/List - Dynamic class vá»›i [ngClass] -->
  <div 
    class="products-container"
    [ngClass]="{
      'view-grid': viewMode === 'grid',
      'view-list': viewMode === 'list'
    }"
  >
    <!-- *ngFor: Loop qua filtered products -->
    <div 
      *ngFor="let product of filteredProducts; let i = index; let isFirst = first; let isLast = last; let isEven = even"
      class="product-card"
      [ngClass]="{
        'card-out-of-stock': !product.inStock,
        'card-first': isFirst,
        'card-even': isEven
      }"
    >
      <!-- Product Image Icon -->
      <div class="product-icon">{{ product.image }}</div>

      <!-- Discount Badge - *ngIf: Chá»‰ hiá»‡n khi cÃ³ discount -->
      <div 
        *ngIf="product.discount > 0" 
        class="discount-badge"
        [ngClass]="getDiscountClass(product.discount)"
      >
        -{{ product.discount }}%
      </div>

      <!-- Out of Stock Badge - *ngIf -->
      <div *ngIf="!product.inStock" class="stock-badge out-of-stock">
        Háº¿t hÃ ng
      </div>
      <div *ngIf="product.inStock" class="stock-badge in-stock">
        CÃ²n hÃ ng
      </div>

      <!-- Product Info -->
      <div class="product-info">
        <h3 class="product-name">{{ product.name }}</h3>
        <p class="product-category">{{ product.category }}</p>

        <!-- Price Section -->
        <div class="price-section">
          <!-- Original price - *ngIf: Chá»‰ hiá»‡n khi cÃ³ discount -->
          <span 
            *ngIf="product.discount > 0" 
            class="price-original"
          >
            {{ product.price | number:'1.0-0' }}Ä‘
          </span>

          <!-- Final price vá»›i dynamic style [ngStyle] -->
          <span 
            class="price-final"
            [ngStyle]="{
              'color': getPriceColor(product.inStock),
              'font-size': product.discount > 10 ? '1.5rem' : '1.3rem',
              'font-weight': product.discount > 0 ? 'bold' : 'normal'
            }"
          >
            {{ getFinalPrice(product) | number:'1.0-0' }}Ä‘
          </span>
        </div>

        <!-- Action Button - Disabled náº¿u háº¿t hÃ ng -->
        <button 
          class="btn-add-cart"
          [disabled]="!product.inStock"
          [ngClass]="{
            'btn-disabled': !product.inStock,
            'btn-enabled': product.inStock
          }"
        >
          {{ product.inStock ? 'ğŸ›’ ThÃªm vÃ o giá»' : 'âŒ Háº¿t hÃ ng' }}
        </button>
      </div>

      <!-- Product Index for demo -->
      <div class="product-index">
        #{{ i + 1 }}
        <span *ngIf="isFirst" class="label-first">First</span>
        <span *ngIf="isLast" class="label-last">Last</span>
      </div>
    </div>
  </div>

  <!-- Directives Demo Section -->
  <div class="demo-section">
    <h2>ğŸ¯ Directives Demo trong Task 1.2</h2>
    
    <div class="demo-grid">
      <!-- *ngIf Demo -->
      <div class="demo-card">
        <h3>*ngIf - Conditional Rendering</h3>
        <code>&lt;div *ngIf="condition"&gt;Content&lt;/div&gt;</code>
        <p>âœ… Hiá»ƒn thá»‹ discount badge chá»‰ khi cÃ³ discount > 0</p>
        <p>âœ… Hiá»ƒn thá»‹ "Háº¿t hÃ ng" badge khi !inStock</p>
      </div>

      <!-- *ngFor Demo -->
      <div class="demo-card">
        <h3>*ngFor - Loop Data</h3>
        <code>&lt;div *ngFor="let item of items; let i = index"&gt;</code>
        <p>âœ… Loop qua filteredProducts array</p>
        <p>âœ… Sá»­ dá»¥ng: index, first, last, even</p>
      </div>

      <!-- [ngClass] Demo -->
      <div class="demo-card">
        <h3>[ngClass] - Dynamic Classes</h3>
        <code>[ngClass]="{{ '{' }}'class-name': condition{{ '}' }}"</code>
        <p>âœ… card-out-of-stock khi !inStock</p>
        <p>âœ… view-grid / view-list cho layout</p>
      </div>

      <!-- [ngStyle] Demo -->
      <div class="demo-card">
        <h3>[ngStyle] - Dynamic Styles</h3>
        <code>[ngStyle]="{{ '{' }}'color': getColor(){{ '}' }}"</code>
        <p>âœ… MÃ u giÃ¡: xanh (cÃ²n hÃ ng) / xÃ¡m (háº¿t hÃ ng)</p>
        <p>âœ… Font size thay Ä‘á»•i theo discount</p>
      </div>

      <!-- [(ngModel)] Demo -->
      <div class="demo-card">
        <h3>[(ngModel)] - Two-way Binding</h3>
        <code>&lt;input [(ngModel)]="property"&gt;</code>
        <p>âœ… Search input: searchTerm</p>
        <p>âœ… Category select: selectedCategory</p>
        <p>âœ… Checkbox: showOutOfStock</p>
      </div>
    </div>
  </div>

</div>
